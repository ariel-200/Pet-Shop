@page
@model PetShop.Pages.Animals.DetailsModel

@{
    // Set the page title based on the animal's name
    ViewData["Title"] = Model.Animal?.Name ?? "Animal Details";
}

@if (Model.Animal == null)
{
    <p>Animal not found.</p>
}
else
{
    <div class="container mt-4">
        <div class="row">
            @* Left column: large animal image *@
            <div class="col-md-5">
                <img src="@Model.Animal.ImagePath"
                     alt="@Model.Animal.Name"
                     class="img-fluid rounded shadow-sm"
                     style="max-height: 350px; object-fit: cover;" />
            </div>

            @* Right column: animal information and action buttons *@
            <div class="col-md-7">
                <h2>@Model.Animal.Name</h2>

                <p>
                    <strong>Species:</strong> @Model.Animal.Category?.Name <br />
                    <strong>Breed:</strong> @Model.Animal.Breed <br />
                    <strong>Gender:</strong> @Model.Animal.Gender <br />
                    <strong>Age:</strong> @Model.Animal.Age <br />
                    <strong>Price:</strong>
                    @Model.Animal.Price.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-US"))
                </p>

                <div class="mb-3">
                    <strong>Description:</strong>
                    <p>@Model.Animal.Description</p>
                </div>

                @* If the animal is not available, show a message and hide Add to Cart *@
                @if (!Model.Animal.IsAvailable)
                {
                    <div class="alert alert-warning">
                        This animal has already been reserved and is no longer available.
                    </div>

                    <a asp-page="/ShoppingCart" class="btn btn-outline-secondary me-2">
                        View Cart
                    </a>

                    <a asp-page="Index" class="btn btn-link">
                        Back to Animals
                    </a>
                }
                else
                {
                    @* Form with Add to Cart button for available animals *@
                    <form method="post">
                        <button type="submit" class="btn btn-primary me-2">
                            Add to Cart
                        </button>

                        <a asp-page="/ShoppingCart" class="btn btn-outline-secondary me-2">
                            View Cart
                        </a>

                        <a asp-page="Index" class="btn btn-link">
                            Back to Animals
                        </a>
                    </form>
                }
            </div>
        </div>
    </div>
}
